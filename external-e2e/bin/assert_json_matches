#!/usr/bin/env ruby
# Read two json files and validate that the hash versions match

# include the "lib" directory
File.expand_path(File.join(__dir__, "..", "lib")).tap {|pwd|
  $LOAD_PATH.unshift(pwd) unless $LOAD_PATH.include?(pwd)
}

file1 = ARGV[0]
file2 = ARGV[1]

require 'json'
j1 = JSON.parse(File.read(file1))
j2 = JSON.parse(File.read(file2))

exit 0 if j1 == j2

# figure out why they are different
diff = j1.to_a - j2.to_a
abort("Objects are different! \n First[#{file1}]: \n#{j1}\n Second[#{file2}]:\n#{file2}\n\nDifference:\n#{diff}")
